[
  {
    "id": "system.action.default",
    "outcomeMessage": {
      "type": "suggestion",
      "text": "Привет, я Telegram Bot от компании ShermanTravel) Я помогаю людям определиться с поездкой. Следуйте инструкции)\\n Выберите суму.",
      "buttons": [
        {
          "nextActionId": "actions.before_hundred_euros",
          "buttonText": "до 100 €"
        },
        {
          "nextActionId": "actions.before_hundred_fifty_euros",
          "buttonText": "до 150 €"
        },
        {
          "nextActionId": "actions.before_two_hundred",
          "buttonText": "до 200 €"
        }
      ]
    }
  },
  {
    "id": "actions.before_two_hundred",
    "expectedIncomeType": "SUGGESTION",
    "outcomeMessage": {
      "type": "suggestion",
      "text": "Виберите страну.",
      "buttons": [
        {
          "nextActionId": "action.expensive_greece",
          "buttonText": "Греция"
        }
      ]
    }
  },
  {
    "id": "action.expensive_greece",
    "expectedIncomeType": "SUGGESTION",
    "outcomeMessage": {
      "type": "suggestion",
      "text": "Города в Греции!",
      "buttons": [
        {
          "nextActionId": "action.choose_days_quantity@Салоника",
          "buttonText": "Салоника"
        }
      ]
    }
  },
  {
    "id": "actions.before_hundred_fifty_euros",
    "expectedIncomeType": "SUGGESTION",
    "outcomeMessage": {
      "type": "suggestion",
      "text": "Виберите страну.",
      "buttons": [
        {
          "nextActionId": "action.greece",
          "buttonText": "Греция (С июля)"
        },
        {
          "nextActionId": "action.denmark",
          "buttonText": "Дания"
        },
        {
          "nextActionId": "action.kipr",
          "buttonText": "Кипр"
        },
        {
          "nextActionId": "action.expensive_germany",
          "buttonText": "Германия"
        },
        {
          "nextActionId": "action.sweden",
          "buttonText": "Швеция"
        }
      ]
    }
  },
  {
    "id": "action.greece",
    "expectedIncomeType": "SUGGESTION",
    "outcomeMessage": {
      "type": "suggestion",
      "text": "Города в Греции!",
      "buttons": [
        {
          "nextActionId": "action.choose_days_quantity@Афины",
          "buttonText": "Афины"
        }
      ]
    }
  },
  {
    "id": "action.denmark",
    "expectedIncomeType": "SUGGESTION",
    "outcomeMessage": {
      "type": "suggestion",
      "text": "Города в Дании!",
      "buttons": [
        {
          "nextActionId": "action.choose_days_quantity@Копенгаген",
          "buttonText": "Копенгаген"
        }
      ]
    }
  },
  {
    "id": "action.sweden",
    "expectedIncomeType": "SUGGESTION",
    "outcomeMessage": {
      "type": "suggestion",
      "text": "Города в Швеции!",
      "buttons": [
        {
          "nextActionId": "action.choose_days_quantity@Стокгольм",
          "buttonText": "Стокгольм"
        }
      ]
    }
  },
  {
    "id": "action.kipr",
    "expectedIncomeType": "SUGGESTION",
    "outcomeMessage": {
      "type": "suggestion",
      "text": "Города на Кипре!",
      "buttons": [
        {
          "nextActionId": "action.choose_days_quantity@Ларнака",
          "buttonText": "Ларнака"
        }
      ]
    }
  },
  {
    "id": "action.expensive_germany",
    "expectedIncomeType": "SUGGESTION",
    "outcomeMessage": {
      "type": "suggestion",
      "text": "Города в Германии!",
      "buttons": [
        {
          "nextActionId": "action.choose_days_quantity@Бремен",
          "buttonText": "Бремен"
        },
        {
          "nextActionId": "action.choose_days_quantity@Гамбург",
          "buttonText": "Гамбург"
        },
        {
          "nextActionId": "action.choose_days_quantity@Ганновер",
          "buttonText": "Ганновер"
        },
        {
          "nextActionId": "action.choose_days_quantity@Дортмунд",
          "buttonText": "Дортмунд"
        },
        {
          "nextActionId": "action.choose_days_quantity@Кельн",
          "buttonText": "Кельн"
        },
        {
          "nextActionId": "action.choose_days_quantity@Кельн",
          "buttonText": "Кельн"
        },
        {
          "nextActionId": "action.choose_days_quantity@Нюрнберг",
          "buttonText": "Нюрнберг"
        },
        {
          "nextActionId": "action.choose_days_quantity@Мюнхен",
          "buttonText": "Мюнхен"
        }
      ]
    }
  },
  {
    "id": "actions.before_hundred_euros",
    "expectedIncomeType": "SUGGESTION",
    "outcomeMessage": {
      "type": "suggestion",
      "text": "Виберите страну!",
      "buttons": [
        {
          "nextActionId": "action.bolgaria@Болгария",
          "buttonText": "Болгария"
        },
        {
          "nextActionId": "action.austria@Австрия",
          "buttonText": "Австрия"
        },
        {
          "nextActionId": "action.polscha",
          "buttonText": "Польша"
        },
        {
          "nextActionId": "action.germany@Германия",
          "buttonText": "Германия"
        },
        {
          "nextActionId": "action.estonia@Естония",
          "buttonText": "Естония"
        },
        {
          "nextActionId": "action.latvia@Латвия",
          "buttonText": "Латвия"
        },
        {
          "nextActionId": "action.litva@Литва",
          "buttonText": "Литва"
        },
        {
          "nextActionId": "action.england@Англия",
          "buttonText": "Англия"
        },
        {
          "nextActionId": "action.vengria@Венгрия",
          "buttonText": "Венгрия"
        },
        {
          "nextActionId": "action.slovakia@Словакія",
          "buttonText": "Словения"
        }
      ]
    }
  },
  {
    "id": "action.austria",
    "expectedIncomeType": "SUGGESTION",
    "outcomeMessage": {
      "type": "suggestion",
      "text": "Города в Австрии!",
      "buttons": [
        {
          "nextActionId": "action.choose_days_quantity@Вена",
          "buttonText": "Вена"
        }
      ]
    }
  },
  {
    "id": "action.bolgaria",
    "expectedIncomeType": "SUGGESTION",
    "outcomeMessage": {
      "type": "suggestion",
      "text": "Города в Болгарии!",
      "buttons": [
        {
          "nextActionId": "action.choose_days_quantity@София",
          "buttonText": "София"
        }
      ]
    }
  },
  {
    "id": "action.polscha",
    "expectedIncomeType": "SUGGESTION",
    "outcomeMessage": {
      "type": "suggestion",
      "text": "Города в Польше!",
      "buttons": [
        {
          "nextActionId": "action.choose_days_quantity@Краков",
          "buttonText": "Краков"
        },
        {
          "nextActionId": "action.choose_days_quantity@Варшава",
          "buttonText": "Варшава"
        },
        {
          "nextActionId": "action.choose_days_quantity@Вроцлав",
          "buttonText": "Вроцлав"
        },
        {
          "nextActionId": "action.choose_days_quantity@Гданск",
          "buttonText": "Гданск"
        },
        {
          "nextActionId": "action.choose_days_quantity@Катовице",
          "buttonText": "Катовице"
        },
        {
          "nextActionId": "action.choose_days_quantity@Познань",
          "buttonText": "Познань"
        }
      ]
    }
  },
  {
    "id": "action.estonia",
    "expectedIncomeType": "SUGGESTION",
    "outcomeMessage": {
      "type": "suggestion",
      "text": "Города в Естонии!",
      "buttons": [
        {
          "nextActionId": "action.choose_days_quantity@Талин",
          "buttonText": "Талин"
        }
      ]
    }
  },
  {
    "id": "action.litva",
    "expectedIncomeType": "SUGGESTION",
    "outcomeMessage": {
      "type": "suggestion",
      "text": "Города в Литве!",
      "buttons": [
        {
          "nextActionId": "action.choose_days_quantity@Вильнюс",
          "buttonText": "Вильнюс"
        }
      ]
    }
  },
  {
    "id": "action.germany",
    "expectedIncomeType": "SUGGESTION",
    "outcomeMessage": {
      "type": "suggestion",
      "text": "Города в Германии!",
      "buttons": [
        {
          "nextActionId": "action.choose_days_quantity@Берлин",
          "buttonText": "Берлин"
        },
        {
          "nextActionId": "action.choose_days_quantity@Франкфурт",
          "buttonText": "Франкфурт"
        }
      ]
    }
  },
  {
    "id": "action.england",
    "expectedIncomeType": "SUGGESTION",
    "outcomeMessage": {
      "type": "suggestion",
      "text": "Города в Англии!",
      "buttons": [
        {
          "nextActionId": "action.choose_days_quantity@Лондон",
          "buttonText": "Лондон"
        }
      ]
    }
  },
  {
    "id": "action.vengria",
    "expectedIncomeType": "SUGGESTION",
    "outcomeMessage": {
      "type": "suggestion",
      "text": "Города в Венгрии!",
      "buttons": [
        {
          "nextActionId": "action.choose_days_quantity@Будапешт",
          "buttonText": "Будапешт"
        }
      ]
    }
  },
  {
    "id": "action.latvia",
    "expectedIncomeType": "SUGGESTION",
    "outcomeMessage": {
      "type": "suggestion",
      "text": "Города в Латвии!",
      "buttons": [
        {
          "nextActionId": "action.choose_days_quantity@Рига",
          "buttonText": "Рига"
        }
      ]
    }
  },
  {
    "id": "action.slovakia",
    "expectedIncomeType": "SUGGESTION",
    "outcomeMessage": {
      "type": "suggestion",
      "text": "Корода в Словакии!",
      "buttons": [
        {
          "nextActionId": "action.choose_days_quantity@Братислава",
          "buttonText": "Братислава"
        }
      ]
    }
  },
  {
    "id": "action.choose_days_quantity",
    "expectedIncomeType": "SUGGESTION",
    "outcomeMessage": {
      "type": "suggestion",
      "text": "Длительность поездки?",
      "buttons": [
        {
          "nextActionId": "action.choose_month@1-2",
          "buttonText": "1-2"
        },
        {
          "nextActionId": "action.choose_month@2-3",
          "buttonText": "2-3"
        },
        {
          "nextActionId": "action.choose_month@4",
          "buttonText": ">4"
        }
      ]
    },
    "db_params": [
      {
        "paramValue": "${buttonText}",
        "table": "TELEGRAM_USERS",
        "idName": "_id",
        "idValue": "${userId}",
        "field": "params.city"
      }
    ]
  },
  {
    "_id": "action.choose_month",
    "outcomeMessage": {
      "type": "suggestion",
      "buttons": [
        {
          "nextActionId": "action.people_quantity@this",
          "buttonText": "Этот месяц",
          "params": {}
        },
        {
          "nextActionId": "action.people_quantity@next",
          "buttonText": "Следуйщий месяц",
          "params": {}
        },
        {
          "nextActionId": "action.people_quantity@unknown",
          "buttonText": "Не знаю",
          "params": {}
        }
      ],
      "text": "В каком месяце?"
    },
    "params": {
      "db_params": [
        {
          "paramValue": "${buttonText}",
          "table": "TELEGRAM_USERS",
          "idName": "_id",
          "idValue": "${userId}",
          "field": "params.days"
        }
      ]
    },
    "expectedIncomeType": "SUGGESTION"
  },
  {
    "id": "action.people_quantity",
    "expectedIncomeType": "SUGGESTION",
    "outcomeMessage": {
      "type": "suggestion",
      "text": "Количество человек?",
      "buttons": [
        {
          "nextActionId": "actions.personal_info@Сам",
          "buttonText": "Сам"
        },
        {
          "nextActionId": "actions.personal_info@Вдвоем",
          "buttonText": "Вдвоем"
        },
        {
          "nextActionId": "actions.personal_info@Компания",
          "buttonText": "Компания"
        }
      ]
    },
    "db_params": [
      {
        "paramValue": "${buttonText}",
        "table": "TELEGRAM_USERS",
        "idName": "_id",
        "idValue": "${userId}",
        "field": "params.month"
      }
    ]
  },
  {
    "id": "actions.personal_info",
    "expectedIncomeType": "SUGGESTION",
    "nextActionId": "actions.last",
    "outcomeMessage": {
      "type": "text",
      "text": "Введите информацию как с вами связатся!"
    },
    "db_params": [
      {
        "paramValue": "${buttonText}",
        "table": "TELEGRAM_USERS",
        "idName": "_id",
        "idValue": "${userId}",
        "field": "params.days"
      }
    ]
  },
  {
    "_id": "actions.last",
    "outcomeMessage": {
      "type": "suggestion",
      "buttons": [
        {
          "nextActionId": "system.action.default",
          "buttonText": "Еще заказ)?",
          "params": {}
        }
      ],
      "text": "Спасибо, за предоставленную информацию. В ближайшее время с Вами свяжется наш менеджер. Ожидайте звонка. Хорошего вам дня 🙂",
      "special_action": true
    },
    "params": {
      "db_params": [
        {
          "paramValue": "FINISHED",
          "table": "TELEGRAM_USERS",
          "idName": "_id",
          "idValue": "${userId}",
          "field": "params.chat"
        },
        {
          "paramValue": "${text}",
          "table": "TELEGRAM_USERS",
          "idName": "_id",
          "idValue": "${userId}",
          "field": "params.contact_info"
        }
      ]
    },
    "expectedIncomeType": "TEXT"
  }
]

